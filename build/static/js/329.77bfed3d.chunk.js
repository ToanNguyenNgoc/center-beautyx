"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[329],{36763:function(e,n,r){var l=r(43144),a=r(15671),i=r(21075),t=r(763),s=r(65602),c=new((0,l.Z)((function e(){(0,a.Z)(this,e),this.getOrgById=function(e){var n={"filter[location]":(0,s.xo)()},r=(0,t.pickBy)(n,t.identity),l="/organizations/".concat(e);return i.Z.get(l,(0,s.aF)((0,t.pickBy)(r)))},this.getAll=function(e){var n=(0,s.xo)(),r={page:e.page||1,limit:15,"filter[keyword]":e.keyword,"filter[tags]":e.tags,"filter[min_price]":e.min_price,"filter[max_price]":e.max_price,"filter[is_momo_ecommerce_enable]":e.is_ecommerce,"filter[location]":"distance"===e.sort?n:null,"filter[province_code]":e.province_code,"filter[district_code]":e.district_code,sort:"distance"!==e.sort?e.sort:null,include:"tags|province|district|ward|branches|favorites"},l=(0,t.pickBy)(r,t.identity);return i.Z.get("/organizations",(0,s.aF)(l))},this.getServicesByOrg=function(e){var n="/organizations/".concat(e.org_id,"/services"),r={page:e.page||1,limit:15,"filter[keyword]":e.keyword,"filter[service_group_id]":e.cate_id,"filter[special]":e.special,"filter[is_momo_ecommerce_enable]":e.is_ecommerce,include:"category|favorites_count",append:"is_favorite|rating|bought_count"},l=(0,t.pickBy)(r,t.identity);if(e.org_id)return i.Z.get(n,{params:l})}})));n.Z=c},57855:function(e,n,r){r.r(n),r.d(n,{default:function(){return I}});var l=r(72791),a=r(11838),i=(r(79373),r(86009),r(76653)),t=r(33855),s=r(1413),c=r(74165),o=r(15861),u=r(70885),d=r(11708),m=r(35058),f=r(6991),p=r(89014),v=r(42982),h=r(64248),x=r(16523),g=r(64285),j=r(80184);var _=function(e){var n=e.platFormListRef,r=e.onTogglePlatFormList,l=e.bannerDetail,a=(0,t.I0)(),c=l.platform.split("|").filter(Boolean);return(0,j.jsxs)("div",{className:"input-form__wrap flat-form",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"N\u1ec1n t\u1ea3ng"})}),(0,j.jsxs)("div",{className:"form-control form-control-solid",children:[(0,j.jsxs)("div",{className:"flex-row-sp plat-form-select",children:[(0,j.jsxs)("ul",{className:"flex-row plat-form-select__arr",children:[0===c.length&&(0,j.jsx)("li",{className:"item",children:"T\u1ea5t c\u1ea3"}),c.map((function(e,n){return(0,j.jsx)(h.Z,{platForm:e,element:(0,j.jsx)("img",{onClick:function(){return function(e){a((0,i.Jr)((0,s.Z)((0,s.Z)({},l),{},{platform:c.filter((function(n){return n!==e})).join("|")})))}(e)},src:x.U.crossCircleBlack,alt:""})},n)}))]}),(0,j.jsx)("img",{onClick:r,className:"icon",src:x.U.caretDownBlack,alt:""})]}),(0,j.jsx)("div",{ref:n,className:"plat-form-list",children:(0,j.jsxs)("ul",{className:"list",children:[(0,j.jsx)("li",{style:0===c.length?{backgroundColor:"var(--bs-success)",color:"var(--bs-gray-100)"}:{},children:"T\u1ea5t c\u1ea3"}),g.e.map((function(e,n){return(0,j.jsx)("li",{style:c.includes(e)?{backgroundColor:"var(--bs-success)",color:"var(--bs-gray-100)"}:{},onClick:function(){return function(e){a((0,i.Jr)((0,s.Z)((0,s.Z)({},l),{},{platform:c.includes(e)?c.filter((function(n){return n!==e})).join("|"):[].concat((0,v.Z)(c),[e]).join("|")})))}(e)},children:e},n)}))]})})]})]})};var N=function(e){var n,r=e.typeBannerRef,l=e.onToggleBannerType,a=e.bannerDetail,c=(0,t.I0)();return(0,j.jsxs)("div",{className:"input-form__wrap",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"Lo\u1ea1i Banner cho"})}),(0,j.jsxs)("div",{className:"form-control form-control-solid",children:[(0,j.jsxs)("div",{onClick:l,className:"flex-row-sp plat-form-select",children:[(0,j.jsx)("ul",{className:"flex-row plat-form-select__arr",children:(0,j.jsx)("li",{className:"item",children:""===a.type?"Ch\u1ecdn lo\u1ea1i Banners":null===(n=f.EY.find((function(e){return e.type===a.type})))||void 0===n?void 0:n.title})}),(0,j.jsx)("img",{className:"icon",src:x.U.caretDownBlack,alt:""})]}),(0,j.jsx)("div",{ref:r,className:"plat-form-list",children:(0,j.jsx)("ul",{className:"list",children:f.EY.map((function(e){return(0,j.jsx)("li",{style:e.type===a.type?{backgroundColor:"var(--kt-primary-active)",color:"var(--white)"}:{},onClick:function(){return function(e){var n,l;null===r||void 0===r||null===(n=r.current)||void 0===n||null===(l=n.classList)||void 0===l||l.remove("plat-form-act"),e.type!==a.type&&c((0,i.Jr)((0,s.Z)((0,s.Z)({},a),{},{type:e.type,url:"",origin_id:null})))}(e)},children:e.title},e.id)}))})})]})]})},y=r(66770),b=r.n(y),Z=r(36763),k=r(763);var w=function(e){var n=e.bannerDetail,r=(0,t.I0)(),a=(0,l.useState)(!1),v=(0,u.Z)(a,2),h=v[0],x=v[1],g=(0,l.useState)([]),_=(0,u.Z)(g,2),N=_[0],y=_[1],w=(0,l.useState)(""),C=(0,u.Z)(w,2),B=C[0],T=C[1],L=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ORGANIZATION"!==n.type||!n.origin_id){e.next=5;break}return e.next=3,Z.Z.getOrgById(n.origin_id);case 3:r=e.sent,T(r.data.context.name);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){L()}));var R=(0,l.useRef)(null),D=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Z.getAll({keyword:n});case 3:r=e.sent,y(r.data.context.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),I=(0,l.useCallback)((0,k.debounce)((function(e){D(e)}),1e3),[]),U=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(l){var a,t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",l),x(!0),e.prev=3,e.next=6,d.Z.postMedia(a);case 6:t=e.sent,r((0,i.Jr)((0,s.Z)((0,s.Z)({},n),{},{url:t.data.context.original_url}))),x(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),x(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),E=(0,l.useCallback)((function(e){r((0,i.Jr)({url:e.target.value}))}),[]);return(0,j.jsxs)(j.Fragment,{children:[n.type===f.Zi.ORGANIZATION&&(0,j.jsxs)("div",{className:"input-form__wrap",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"T\xean doanh nghi\u1ec7p"})}),(0,j.jsx)("input",{type:"text",value:B,onChange:function(e){e.target.value&&y([]),T(e.target.value),I(e.target.value)},onFocus:function(){var e,n;return null===(e=R.current)||void 0===e||null===(n=e.classList)||void 0===n?void 0:n.add("search-list-show")},onBlur:function(){var e,n;return null===(e=R.current)||void 0===e||null===(n=e.classList)||void 0===n?void 0:n.remove("search-list-show")},className:"form-control form-control-solid",placeholder:"T\xecm ki\u1ebfm doanh nghi\u1ec7p..."}),(0,j.jsx)("ul",{ref:R,className:"search-list",children:N.map((function(e,n){return(0,j.jsxs)("li",{onClick:function(){return function(e){var n,l;console.log(e),r((0,i.Jr)({origin_id:null===e||void 0===e?void 0:e.id})),T(null===e||void 0===e?void 0:e.name),null===(n=R.current)||void 0===n||null===(l=n.classList)||void 0===l||l.remove("search-list-show")}(e)},children:[(0,j.jsx)("img",{src:null===e||void 0===e?void 0:e.image_url,alt:"",className:"avatar"}),null===e||void 0===e?void 0:e.name]},n)}))})]}),(n.type===f.Zi.SEARCH_RESULT||n.type===f.Zi.WEB)&&(0,j.jsxs)("div",{className:"input-form__wrap",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"D\u01b0\u1eddng d\u1eabn Url"})}),(0,j.jsx)("input",{value:n.url,onChange:E,type:"text",className:"form-control form-control-solid",placeholder:"D\u01b0\u1eddng d\u1eabn Url..."})]}),n.type===f.Zi.HTML&&(0,j.jsxs)("div",{className:"input-form__wrap",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"Vi\u1ebft Blog"})}),(0,j.jsx)(b(),{value:n.htmlTemplate,onChange:function(e){r((0,i.Jr)((0,s.Z)((0,s.Z)({},n),{},{htmlTemplate:e})))}})]}),n.type===f.Zi.VIDEO&&(0,j.jsxs)("div",{className:"input-form__wrap",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"Upload video"})}),(0,j.jsx)(m.b,{multiple:!1,name:"file",types:f.WH,handleChange:function(e){U(e)},children:(0,j.jsx)("div",{className:"banner-form__img",children:""!==n.url?(0,j.jsx)("video",{className:"banner-form__img-video",controls:!0,children:(0,j.jsx)("source",{src:n.url})}):(0,j.jsxs)("div",{className:"flex-col-al banner-form__img-place",children:[(0,j.jsx)("img",{src:p.J.imgPlaceHolder,alt:""}),(0,j.jsx)("span",{children:h?"\u0110ang t\u1ea3i video l\xean...":" K\xe9o th\u1ea3 Video v\xe0o \u0111\xe2y ho\u1eb7c Click \u0111\u1ec3 ch\u1ecdn Video"})]})})})]})]})},C=r(4125),B=r(64280),T=r(16386);var L=function(e){var n=e.bannerDetail,r=e.params,a=(0,t.I0)(),v=(0,l.useRef)(null),h=(0,l.useRef)(null),x=(0,l.useState)(!1),g=(0,u.Z)(x,2),y=g[0],b=g[1],Z=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var r,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",n),b(!0),e.prev=3,e.next=6,d.Z.postMedia(r);case 6:l=e.sent,a((0,i.Jr)({imageURL:l.data.context.original_url})),b(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),b(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),k=(0,l.useCallback)((function(e){a((0,i.Jr)({name:e.target.value}))}),[]),L=function(){var e={name:n.name,imageURL:n.imageURL,type:n.type,platform:n.platform,htmlTemplate:n.htmlTemplate,url:n.url,expires_at:n.expires_at,origin_id:n.origin_id};a((0,i.XM)(e))};return(0,j.jsx)("div",{className:"post d-flex flex-column-fluid",id:"kt_post",children:(0,j.jsx)("div",{className:"container cus-container",children:(0,j.jsxs)("div",{className:"banner-form",children:[(0,j.jsxs)("div",{className:"banner-form_media",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"Banner"})}),(0,j.jsx)(m.b,{className:"form-input-file",multiple:!1,handleChange:function(e){Z(e)},name:"file",types:f.rh,children:(0,j.jsx)("div",{className:"banner-form__img",children:""!==n.imageURL?(0,j.jsx)("img",{src:n.imageURL,alt:"",className:"img-temp"}):(0,j.jsxs)("div",{className:"flex-col-al banner-form__img-place",children:[(0,j.jsx)("img",{src:p.J.imgPlaceHolder,alt:""}),(0,j.jsx)("span",{children:y?"\u0110ang t\u1ea3i l\xean...":"K\xe9o th\u1ea3 h\xecnh \u1ea3nh v\xe0o \u0111\xe2y ho\u1eb7c Click \u0111\u1ec3 ch\u1ecdn h\xecnh \u1ea3nh"})]})})})]}),(0,j.jsxs)("div",{className:"input-form",children:[(0,j.jsxs)("div",{className:"input-form__wrap",children:[(0,j.jsx)("label",{className:"form-label",children:(0,j.jsx)("span",{className:"required",children:"T\xean Banners"})}),(0,j.jsx)("input",{value:n.name,onChange:k,type:"text",className:"form-control form-control-solid",placeholder:"T\xean Banner"})]}),(0,j.jsx)(_,{bannerDetail:n,platFormListRef:v,onTogglePlatFormList:function(){var e,n,r;null===v||void 0===v||null===(e=v.current)||void 0===e||e.classList.toggle("plat-form-act"),null===h||void 0===h||null===(n=h.current)||void 0===n||null===(r=n.classList)||void 0===r||r.remove("plat-form-act")}}),(0,j.jsxs)("div",{className:"flex-row-sp grid-col-2",children:[(0,j.jsx)(N,{bannerDetail:n,typeBannerRef:h,onToggleBannerType:function(){var e,n,r;null===h||void 0===h||null===(e=h.current)||void 0===e||null===(n=e.classList)||void 0===n||n.toggle("plat-form-act"),null===v||void 0===v||null===(r=v.current)||void 0===r||r.classList.remove("plat-form-act")}}),(0,j.jsxs)("div",{className:"flex-col input-form__wrap",children:[(0,j.jsx)("label",{className:"form-label",children:"Ng\xe0y h\u1ebft h\u1ea1n"}),(0,j.jsx)(C.$,{disablePast:!0,inputFormat:"dd/MM/yyyy",value:n.expires_at&&new Date(n.expires_at),onChange:function(e){var n=e,r=(0,T.Z)(n,"yyyy-MM-dd 00:00:00");a((0,i.Jr)({expires_at:r}))},renderInput:function(e){return(0,j.jsx)(B.Z,(0,s.Z)({},e))}})]})]}),(0,j.jsx)(w,{bannerDetail:n}),(0,j.jsxs)("div",{className:"input-form__bot",children:[(null===r||void 0===r?void 0:r.id)&&(0,j.jsx)("button",{onClick:function(){""!==(null===r||void 0===r?void 0:r.id)&&r&&a((0,i.qm)(null===r||void 0===r?void 0:r.id))},className:"btn btn-light",children:"Kh\xf4i ph\u1ee5c"}),(0,j.jsx)("button",{onClick:function(){""!==n.name&&""!==n.imageURL&&(n.type===f.Zi.HTML&&""!==n.htmlTemplate&&L(),n.type!==f.Zi.WEB&&n.type!==f.Zi.SEARCH_RESULT&&n.type!==f.Zi.VIDEO||""===n.url||L(),n.type!==f.Zi.ORGANIZATION&&n.type!==f.Zi.DISCOUNT||!n.origin_id||L())},className:"btn btn-success",children:"L\u01b0u thay \u0111\u1ed5i"})]})]})]})})})},R=r(11869),D=r(16871);var I=function(){var e=(0,D.UO)(),n=(0,t.v9)((function(e){return e.BANNER.bannerDetail})),r=n.status,s=n.banner,c=(0,t.I0)();return(0,l.useEffect)((function(){null!==e&&void 0!==e&&e.id?c((0,i.qm)(null===e||void 0===e?void 0:e.id)):e.id||c((0,i.Qj)())}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(a.Z,{title:"T\u1ea1o m\u1edbi Banner"}),(!e.id||r===R.Q.SUCCESS)&&(0,j.jsx)(L,{bannerDetail:s,params:e})]})}},11838:function(e,n,r){r.d(n,{Z:function(){return a}});r(72791);var l=r(80184);var a=function(e){var n=e.title,r=e.element;return(0,l.jsx)("div",{className:"toolbar",id:"kt_toolbar",children:(0,l.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-stack",children:[(0,l.jsx)("h1",{className:"d-flex align-items-center text-dark fw-bolder my-1 fs-3",children:n}),r]})})}},79373:function(){}}]);
//# sourceMappingURL=329.77bfed3d.chunk.js.map