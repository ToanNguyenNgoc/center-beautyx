"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[37],{96328:function(e,t,a){a.d(t,{y:function(){return c},S:function(){return d}});var n=a(43144),o=a(15671),s=a(21075),r=a(16229),i=a(763),l=a(65602),c=new((0,n.Z)((function e(){(0,o.Z)(this,e),this.putApprove=function(e,t){return s.Z.put(r.NK.APPROVES_BY_ID(e),(0,i.pickBy)(t,i.identity),(0,l.KH)())}}))),d=new((0,n.Z)((function e(){(0,o.Z)(this,e),this.postDiscount=function(e){return s.Z.post(r.NK.DISCOUNTS,e,(0,l.KH)())},this.getAll=function(e){return s.Z.get(r.NK.DISCOUNTS,{params:(0,i.pickBy)(e,i.identity)}).then((function(e){return e.data.context}))},this.getDiscountDetail=function(e){return s.Z.get(r.NK.DISCOUNTS_ID(e.id),{params:(0,i.pickBy)(e,i.identity)}).then((function(e){return e.data}))}})))},87037:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var n=a(70885),o=a(1413),s=a(72791),r=a(11838),i=a(5239),l=a(26023),c=a(16229),d=a(72930),p=a(35259),m=a(97892),u=a.n(m),_=a(74165),h=a(15861),x=a(73542),v=a(96328),g={container:"style_container__+81jf",header:"style_header__zM1cn",header_title:"style_header_title__Na18B",header_created:"style_header_created__inFcF",body:"style_body__ygHJ1",body_head_cnt:"style_body_head_cnt__ydNQZ",body_org:"style_body_org__ks0kn",body_org_img:"style_body_org_img__u-856",body_org_detail:"style_body_org_detail__Tqs3N",org_name:"style_org_name__QGV+j",org_address:"style_org_address__vq-FB",org_contact:"style_org_contact__YXKFR",org_contact_title:"style_org_contact_title__KmmWm",body_approve_detail:"style_body_approve_detail__mhwUg",body_approve_section:"style_body_approve_section__qXLJ+",body_approve_title:"style_body_approve_title__NxpbT",body_approve_btn:"style_body_approve_btn__zzYaK",approve_list:"style_approve_list__5HUQL",approve_list_show:"style_approve_list_show__-MsYE",approve_list_item:"style_approve_list_item__iAYlh",body_log_cnt:"style_body_log_cnt__EcGgV",body_log_left:"style_body_log_left__r8uJC",body_log_right:"style_body_log_right__CoNIq",approve_logs:"style_approve_logs__tYunn",approve_logs_item:"style_approve_logs_item__gi-xC",log_item:"style_log_item__hDeI5",log_item_date:"style_log_item_date__roojc",approve_bot:"style_approve_bot__4+1-J"},b=a(6991),y=a(10193),f=a(80184);var j=function(e){var t,a,r,d=e.open,m=e.setOpen,j=e.approve,N=(0,i.RA)(),Z=(0,s.useState)({log:"",status:j.status}),k=(0,n.Z)(Z,2),w=k[0],S=k[1],D=(0,i.D3)(),W=D.noti,C=D.firstLoad,P=D.resultLoad,Y=D.onCloseNoti,T=(0,s.useState)(!1),M=(0,n.Z)(T,2),A=M[0],B=M[1];(0,i.YE)(A&&d,c.NK.APPROVES,(0,o.Z)((0,o.Z)({},l.X3),{},{page:null!==(t=null===N||void 0===N?void 0:N.page)&&void 0!==t?t:1}));var K=function(){var e=(0,h.Z)((0,_.Z)().mark((function e(){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(),e.prev=1,e.next=4,v.y.putApprove(j.id,w);case 4:B(!0),P("\u0110\xe3 l\u01b0u thay \u0111\u1ed5i"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),P("C\xf3 l\u1ed7i x\u1ea3y ra");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),R=(0,s.useRef)(),z=function(){var e,t;null===(e=R.current)||void 0===e||null===(t=e.classList)||void 0===t||t.toggle(g.approve_list_show)},E=!1;return"APPROVED"!==j.status&&"REJECT"!==j.status||(E=!0),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(x.Z,{open:d,onClose:function(){B(!1),m(!1)},children:[(0,f.jsx)(y.vv,{title:W.message,open:W.openAlert,onClose:Y}),(0,f.jsxs)("div",{className:g.container,children:[(0,f.jsxs)("div",{className:g.header,children:[(0,f.jsx)("span",{className:g.header_title,children:"Chi ti\u1ebft ki\u1ec3m duy\u1ec7t"}),(0,f.jsxs)("span",{className:g.header_created,children:["Ng\xe0y t\u1ea1o:",u()(j.created_at).format("HH:mm DD/MM/YYYY")]})]}),j.organization&&(0,f.jsx)("div",{className:g.body,children:(0,f.jsxs)("div",{className:g.body_head_cnt,children:[(0,f.jsxs)("div",{className:g.body_org,children:[(0,f.jsx)("div",{className:g.body_org_img,children:(0,f.jsx)("img",{onError:function(e){return(0,p.bW)(e)},src:j.organization.image_url,alt:""})}),(0,f.jsxs)("div",{className:g.body_org_detail,children:[(0,f.jsx)("p",{title:"Xem gian h\xe0ng",className:g.org_name,children:j.organization.name}),(0,f.jsx)("p",{className:g.org_address,children:j.organization.full_address}),(0,f.jsxs)("div",{className:g.org_contact,children:[(0,f.jsx)("p",{className:g.org_contact_title,children:"Th\xf4ng tin li\xean l\u1ea1c"}),(0,f.jsx)("div",{className:g.org_contact_list,children:null===(a=j.organization.telephone)||void 0===a?void 0:a.map((function(e){return(0,f.jsx)("p",{className:g.org_contact_item,children:e},e)}))})]})]})]}),(0,f.jsxs)("div",{className:g.body_approve_detail,children:[(0,f.jsxs)("div",{className:g.body_approve_section,children:[(0,f.jsx)("p",{className:g.body_approve_title,children:"Ki\u1ec3m duy\u1ec7t cho"}),(0,f.jsx)(b.M_,{type:j.type})]}),(0,f.jsxs)("div",{className:g.body_approve_section,children:[(0,f.jsx)("p",{className:g.body_approve_title,children:"Tr\u1ea1ng th\xe1i"}),(0,f.jsx)(b.zT,{status:w.status}),(0,f.jsxs)("button",{style:E?{cursor:"not-allowed"}:{},disabled:E,onFocus:z,onBlur:z,className:g.body_approve_btn,children:[(0,f.jsx)("i",{className:"bi bi-pencil-fill fs-5"}),(0,f.jsx)("ul",{ref:R,className:g.approve_list,children:b.Oq.map((function(e){return(0,f.jsx)("li",{onClick:function(){return t=e.STATUS,S((0,o.Z)((0,o.Z)({},w),{},{status:t}));var t},className:g.approve_list_item,children:(0,f.jsx)(b.zT,{status:e.STATUS})},e.STATUS)}))})]})]})]})]})}),(0,f.jsxs)("div",{className:g.body_log_cnt,children:[(0,f.jsxs)("div",{className:g.body_log_left,children:[(0,f.jsx)("span",{className:g.body_approve_title,children:"Ghi ch\xfa"}),(0,f.jsx)("ul",{className:g.approve_logs,children:null===(r=j.logs)||void 0===r?void 0:r.map((function(e){return(0,f.jsxs)("li",{className:g.approve_logs_item,children:[(0,f.jsx)("div",{className:g.log_item,children:e.note}),(0,f.jsx)("span",{className:g.log_item_date,children:u()(e.created_at).format("HH:mm DD/MM/YYYY")})]},e.id)}))})]}),(0,f.jsxs)("div",{className:g.body_log_right,children:[(0,f.jsx)("span",{className:g.body_approve_title,children:"Vi\u1ebft ghi ch\xfa"}),(0,f.jsx)(y.Kx,{onChange:function(e){S((0,o.Z)((0,o.Z)({},w),{},{log:e.target.value}))},placeholder:"Vi\u1ebft ghi ch\xfa..."})]})]}),(0,f.jsx)("div",{className:g.approve_bot,children:(0,f.jsx)(y.Rb,{onClick:K,title:"L\u01b0u thay \u0111\u1ed5i",color:"success",loading:W.load,disable:E})})]})]})})},N=a(16871);var Z=function(){var e,t,a=(0,N.TH)(),n=(0,N.s0)(),s=(0,i.RA)(),p=(0,i.YE)(!0,c.NK.APPROVES,(0,o.Z)((0,o.Z)({},l.X3),{},{page:null!==(e=null===s||void 0===s?void 0:s.page)&&void 0!==e?e:1})),m=p.responseArray,u=p.totalItem,_=p.totalPage;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.Z,{title:"Ki\u1ec3m duy\u1ec7t"}),(0,f.jsxs)("div",{className:"card mb-5 mb-xl-8",children:[(0,f.jsxs)("div",{className:"card-header border-0 pt-5",children:[(0,f.jsxs)("h3",{className:"card-title align-items-start flex-column",children:[(0,f.jsx)("span",{className:"card-label fw-bold fs-3 mb-1",children:"Danh s\xe1ch ki\u1ec3m duy\u1ec7t"}),(0,f.jsxs)("span",{className:"text-muted mt-1 fw-semobold fs-7",children:[u," ki\u1ec3m duy\u1ec7t"]})]}),(0,f.jsx)("div",{className:"card-toolbar",children:(0,f.jsx)("button",{type:"button",className:"btn btn-sm btn-icon btn-color-primary btn-active-light-primary","data-kt-menu-trigger":"click","data-kt-menu-placement":"bottom-end","data-kt-menu-flip":"top-end",children:(0,f.jsx)(d.D8,{path:"/media/icons/duotune/general/gen024.svg",className:"svg-icon-2"})})})]}),(0,f.jsx)("div",{className:"card-body py-3",children:(0,f.jsx)("div",{className:"table-responsive",children:(0,f.jsxs)("table",{className:"table align-middle gs-0 gy-4",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"fw-bold text-muted bg-light",children:[(0,f.jsx)("th",{className:"ps-4 min-w-250px rounded-start",children:"Doanh nghi\u1ec7p"}),(0,f.jsx)("th",{className:"min-w-110px",children:"Duy\u1ec7t cho"}),(0,f.jsx)("th",{className:"min-w-110px",children:" Tr\u1ea1ng th\xe1i "}),(0,f.jsx)("th",{className:"min-w-150px",children:"Ghi ch\xfa"}),(0,f.jsx)("th",{className:"min-w-140px",children:"Ng\xe0y t\u1ea1o"}),(0,f.jsx)("th",{className:"min-w-140px",children:"C\u1eadp nh\u1eadt l\xfac"}),(0,f.jsx)("th",{className:"min-w-100px text-end rounded-end"})]})}),(0,f.jsx)("tbody",{children:null===m||void 0===m?void 0:m.map((function(e,t){return(0,f.jsx)(k,{item:e},t)}))})]})})})]}),(0,f.jsx)(y.Aw,{totalPage:_,onChangePage:function(e){n({pathname:a.pathname,search:"page=".concat(e)})},defaultPage:null!==(t=null===s||void 0===s?void 0:s.page)&&void 0!==t?t:1})]})},k=function(e){var t,a=e.item,o=(0,s.useState)(!1),r=(0,n.Z)(o,2),i=r[0],l=r[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j,{open:i,setOpen:l,approve:a}),(0,f.jsxs)("tr",{children:[a.organization&&(0,f.jsx)("td",{children:(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)("div",{className:"symbol symbol-50px me-5",children:(0,f.jsx)(y.qE,{src:a.organization.image_url})}),(0,f.jsxs)("div",{className:"d-flex justify-content-start flex-column",children:[(0,f.jsx)("span",{className:"text-dark fw-bold text-hover-primary mb-1 fs-6",children:a.organization.name}),(0,f.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7",children:a.organization.address})]})]})}),(0,f.jsx)("td",{children:(0,f.jsx)(p.M_,{type:a.type})}),(0,f.jsx)("td",{children:(0,f.jsx)(p.zT,{status:a.status})}),(0,f.jsx)("td",{children:a.logs.length>0&&(0,f.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:null===(t=a.logs[0])||void 0===t?void 0:t.note})}),(0,f.jsx)("td",{children:(0,f.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:u()(a.created_at).format("HH:mm - DD/MM/YYYY")})}),(0,f.jsx)("td",{children:(0,f.jsx)("span",{className:"text-muted fw-semobold text-muted d-block fs-7 mt-1",children:u()(a.updated_at).format("HH:mm - DD/MM/YYYY")})}),(0,f.jsx)("td",{className:"text-end",children:(0,f.jsx)("button",{onClick:function(){return l(!0)},className:"btn btn-bg-light btn-color-muted btn-active-color-primary btn-sm px-4",children:(0,f.jsx)("i",{className:"bi bi-pencil-fill fs-6"})})})]})]})}},11838:function(e,t,a){a.d(t,{Z:function(){return o}});a(72791);var n=a(80184);var o=function(e){var t=e.title,a=e.element;return(0,n.jsx)("div",{className:"toolbar",id:"kt_toolbar",children:(0,n.jsxs)("div",{id:"kt_toolbar_container",className:"container-fluid d-flex flex-stack",children:[(0,n.jsx)("h1",{className:"d-flex align-items-center text-dark fw-bolder my-1 fs-3",children:t}),a]})})}},73542:function(e,t,a){a.d(t,{Z:function(){return w}});var n=a(4942),o=a(63366),s=a(87462),r=a(72791),i=a(41025),l=a(94419),c=a(96248),d=a(14036),p=a(1414),m=a(60627),u=a(35527),_=a(93736),h=a(47630),x=a(17780);var v=r.createContext({}),g=a(52739),b=a(13967),y=a(80184),f=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],j=(0,h.ZP)(g.Z,{name:"MuiDialog",slot:"Backdrop",overrides:function(e,t){return t.backdrop}})({zIndex:-1}),N=(0,h.ZP)(p.Z,{name:"MuiDialog",slot:"Root",overridesResolver:function(e,t){return t.root}})({"@media print":{position:"absolute !important"}}),Z=(0,h.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:function(e,t){var a=e.ownerState;return[t.container,t["scroll".concat((0,d.Z)(a.scroll))]]}})((function(e){var t=e.ownerState;return(0,s.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),k=(0,h.ZP)(u.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:function(e,t){var a=e.ownerState;return[t.paper,t["scrollPaper".concat((0,d.Z)(a.scroll))],t["paperWidth".concat((0,d.Z)(String(a.maxWidth)))],a.fullWidth&&t.paperFullWidth,a.fullScreen&&t.paperFullScreen]}})((function(e){var t=e.theme,a=e.ownerState;return(0,s.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===a.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===a.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!a.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===a.maxWidth&&(0,n.Z)({maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)")},"&.".concat(x.Z.paperScrollBody),(0,n.Z)({},t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})),a.maxWidth&&"xs"!==a.maxWidth&&(0,n.Z)({maxWidth:"".concat(t.breakpoints.values[a.maxWidth]).concat(t.breakpoints.unit)},"&.".concat(x.Z.paperScrollBody),(0,n.Z)({},t.breakpoints.down(t.breakpoints.values[a.maxWidth]+64),{maxWidth:"calc(100% - 64px)"})),a.fullWidth&&{width:"calc(100% - 64px)"},a.fullScreen&&(0,n.Z)({margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0},"&.".concat(x.Z.paperScrollBody),{margin:0,maxWidth:"100%"}))})),w=r.forwardRef((function(e,t){var a=(0,_.Z)({props:e,name:"MuiDialog"}),n=(0,b.Z)(),p={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},h=a["aria-describedby"],g=a["aria-labelledby"],w=a.BackdropComponent,S=a.BackdropProps,D=a.children,W=a.className,C=a.disableEscapeKeyDown,P=void 0!==C&&C,Y=a.fullScreen,T=void 0!==Y&&Y,M=a.fullWidth,A=void 0!==M&&M,B=a.maxWidth,K=void 0===B?"sm":B,R=a.onBackdropClick,z=a.onClose,E=a.open,F=a.PaperComponent,H=void 0===F?u.Z:F,I=a.PaperProps,O=void 0===I?{}:I,U=a.scroll,V=void 0===U?"paper":U,X=a.TransitionComponent,L=void 0===X?m.Z:X,q=a.transitionDuration,J=void 0===q?p:q,G=a.TransitionProps,Q=(0,o.Z)(a,f),$=(0,s.Z)({},a,{disableEscapeKeyDown:P,fullScreen:T,fullWidth:A,maxWidth:K,scroll:V}),ee=function(e){var t=e.classes,a=e.scroll,n=e.maxWidth,o=e.fullWidth,s=e.fullScreen,r={root:["root"],container:["container","scroll".concat((0,d.Z)(a))],paper:["paper","paperScroll".concat((0,d.Z)(a)),"paperWidth".concat((0,d.Z)(String(n))),o&&"paperFullWidth",s&&"paperFullScreen"]};return(0,l.Z)(r,x.D,t)}($),te=r.useRef(),ae=(0,c.Z)(g),ne=r.useMemo((function(){return{titleId:ae}}),[ae]);return(0,y.jsx)(N,(0,s.Z)({className:(0,i.Z)(ee.root,W),closeAfterTransition:!0,components:{Backdrop:j},componentsProps:{backdrop:(0,s.Z)({transitionDuration:J,as:w},S)},disableEscapeKeyDown:P,onClose:z,open:E,ref:t,onClick:function(e){te.current&&(te.current=null,R&&R(e),z&&z(e,"backdropClick"))},ownerState:$},Q,{children:(0,y.jsx)(L,(0,s.Z)({appear:!0,in:E,timeout:J,role:"presentation"},G,{children:(0,y.jsx)(Z,{className:(0,i.Z)(ee.container),onMouseDown:function(e){te.current=e.target===e.currentTarget},ownerState:$,children:(0,y.jsx)(k,(0,s.Z)({as:H,elevation:24,role:"dialog","aria-describedby":h,"aria-labelledby":ae},O,{className:(0,i.Z)(ee.paper,O.className),ownerState:$,children:(0,y.jsx)(v.Provider,{value:ne,children:D})}))})}))}))}))},17780:function(e,t,a){a.d(t,{D:function(){return s}});var n=a(75878),o=a(21217);function s(e){return(0,o.Z)("MuiDialog",e)}var r=(0,n.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);t.Z=r}}]);
//# sourceMappingURL=37.78faa7a7.chunk.js.map